<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="temp/thymeleaf_layout">

<head>
    <title>상세 정보</title>
    <link rel="stylesheet" th:href="@{/static/css/auction/detail.css}">
    <script defer th:src="@{/static/js/auction/detail.js}"></script>
    <script type="text/javascript" th:inline="javascript"></script>
</head>
<th:block layout:fragment="content">
<!--todo: 가격올리기 기능,수정, 삭제, 댓글, 좋아요-->

    <!--session.loginUser 를 빼주면 session.loginUser.iuser가 null일때 에러.-->
<div id="dataIuser" th:with="data=${Data}" th:data-iuser="${Data.iuser}">
    <div id="data" th:with="ibo=${param.iboard}" th:data-iboard="${ibo}">
    <div th:if="${session.loginUser != null && session.loginUser.iuser == data.iuser}">
        <button id="modBtn">수정</button>
        <button id="delBtn">삭제</button>
    </div>
        <!--<a th:href="@{/auction/del(iboard=${ibo})}">삭제</a>-->
    ~~~~~여기는 디테일 부분 ~~~~~
        <div id="isfollow" onsubmit="return isfollow();"></div>
    <div class="detail_item" }>
    <div>작성자 : <span th:text="${data.writernm}"/></div> <!--옆에 프로필사진-->
    <div>카테고리 : <span th:text="${data.categorynm}"/></div>
    <div>제목 :<span  th:text="${data.title}"/> </div>
    <div>내용 : <span  th:text="${data.ctnt}"/></div>
    <div>즉시 구매가: <span th:text="${data.imbuy}"/> 원</div>
    <div>시작가격 :<span id="buy" name="buy" th:text="${data.buy}"/> 원
        <span th:with="bid=${BidList}" th:if="${session.loginUser != null}">

<!--            <input type="button" onclick="check();" id="upprice" name="upprice" value="경매가 올리기" >-->
<!--            <div th:with="bid=${BidList}">-->
<!--                 <div> 현재 가격은 : (<span id="checkbuy" th:text="${bid.buy}" th:value="${bid.buy}" />) 원 입니다.</div>-->
<!--                <div> ↑↑↑↑현재 입찰자는 (<span id="checkwriternm" th:text="${bid.writernm}" />) 님 입니다↑↑↑↑ </div>-->
<!--            </div>-->

            <div> 현재 가격은 : (<span id="checkbuy" th:text="${data.buy}" th:value="${data.buy}" />) 원 입니다.</div>
            <div> ↑↑↑↑현재 입찰자는 (<span id="checkwriternm" th:text="${data.writernm}" th:value="${data.writernm}" />) 님 입니다↑↑↑↑ </div>


            <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  경매가 등록하기
</button>
            <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="bid-modal">
           <div> 즉시구매가: <input type="text" id="formimbuy" th:value="${data.imbuy}" readonly></div>
           <div> 현재가: <input type="text" id="formbuy" th:value="${data.buy}" readonly></div>
           <div> 경매가: <input type="text" id="formbid" ></div>
          <button type="button" id="formbidbtn" class="btn btn-primary">경매가 등록</button>
          <button type="button" id="formimbuybtn" class="btn btn-primary">즉시구매</button>
      </div>
      <div class="modal-footer">
             <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>




              <div id="img_item">
        <img id="image0" onclick="test();" class="click_img" th:src="@{/static/uploadfile/} + ${data.iboard} + @{/} + ${data.image1}" onerror="this.style.display='none'" } />
        <img id="image1" onclick="test();" class="click_img" th:src="@{/static/uploadfile/} + ${data.iboard} + @{/} + ${data.image2}" onerror="this.style.display='none'" }} />
        <img id="image2" onclick="test();" class="click_img" th:src="@{/static/uploadfile/} + ${data.iboard} + @{/} + ${data.image3}" onerror="this.style.display='none'" }/>
        <img id="image3" onclick="test();" class="click_img" th:src="@{/static/uploadfile/} + ${data.iboard} + @{/} + ${data.image4}" onerror="this.style.display='none'" } />
        <img id="image4" onclick="test();" class="click_img" th:src="@{/static/uploadfile/} + ${data.iboard} + @{/} + ${data.image5}" onerror="this.style.display='none'" } />
    </div>


            <div id="comment_form_container" class="mt-3" th:if="${session.loginUser != null}">
        <div class="row">
            <div class="col">
                <input type="text" name="ctnt" class="form-control" placeholder="Comment">
            </div>
            <div class="col">
                <button type="button" name="comment_submit" class="btn btn-primary">전송</button>
            </div>
        </div>
    </div>

    <div id="comment_list">
        <table class="table table-hover caption-top">
            <caption>댓글 리스트</caption>
            <thead>
<!--            <tr>-->
<!--                <th>번호</th>-->
<!--                <th>내용</th>-->
<!--                <th>작성자</th>-->
<!--                <th>작성일시</th>-->
<!--                <th>비고</th>-->
<!--            </tr>-->
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>





        </span></div>



        <!--이건 나중에 auction_bid와 엮어야함함-->




    </div>
</div>
</div>
</th:block>
</html>